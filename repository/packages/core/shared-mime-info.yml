version: "2.0"
bdepend:
  - libs/glib
  - python/meson
  - util/ninja
  - util/itstool
  - util/xmlto
rdepend:
  - libs/glib
filename: shared-mime-info
comp: tar.bz2
upstream: https://gitlab.freedesktop.org/xdg/shared-mime-info/-/archive/%{version}
license: GPL-2.0-or-later
additional_configure_options: -Dupdate-mimedb=true
configure: |
  cat /etc/xml/catalog
  # wrong DTD version, I guess
  sed -i '/oasis-open/s/4\.1\.2/4.5/' data/shared-mime-info-spec.xml 
  mkdir build
  meson -Dbuildtype=release %{configure_options} build
make: ninja %{make_options} -C build
install: DESTDIR=/target_root ninja -C build install
post_install_script: |
  mkdir -p usr/lib
  mv usr/lib64/pkgconfig usr/lib/
queue_hooks:
  ldconfig: true
